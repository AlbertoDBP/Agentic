# ── Service Identity ──────────────────────────────────────────────────────────
SERVICE_NAME=agent-02-newsletter-ingestion
SERVICE_PORT=8002
LOG_LEVEL=INFO
ENVIRONMENT=development   # production | staging | development

# ── Database ──────────────────────────────────────────────────────────────────
DATABASE_URL=postgresql+psycopg2://user:password@host:5432/income_platform
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_SCHEMA=platform_shared

# ── Cache (Redis / Valkey) ────────────────────────────────────────────────────
REDIS_URL=redis://localhost:6379/0
CACHE_TTL_ANALYST_SIGNAL=3600
CACHE_TTL_CONSENSUS=1800
CACHE_TTL_ARTICLES=86400

# ── APIDojo / Seeking Alpha ───────────────────────────────────────────────────
APIDOJO_SA_API_KEY=your_rapidapi_key_here
APIDOJO_SA_HOST=seeking-alpha.p.rapidapi.com
SA_FETCH_LIMIT_PER_ANALYST=10
SA_REQUEST_TIMEOUT=30

# ── Anthropic (Claude) ────────────────────────────────────────────────────────
ANTHROPIC_API_KEY=your_anthropic_key_here
EXTRACTION_MODEL=claude-haiku-20250310
PHILOSOPHY_MODEL=claude-sonnet-4-20250514
EXTRACTION_MAX_TOKENS=1500
PHILOSOPHY_MAX_TOKENS=800

# ── OpenAI (Embeddings) ───────────────────────────────────────────────────────
OPENAI_API_KEY=your_openai_key_here
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSIONS=1536

# ── FMP (Financial Modeling Prep) ────────────────────────────────────────────
FMP_API_KEY=your_fmp_key_here
FMP_BASE_URL=https://financialmodelingprep.com/stable
FMP_REQUEST_TIMEOUT=30

# ── Harvester Flow Config ─────────────────────────────────────────────────────
DEFAULT_AGING_DAYS=365
DEFAULT_AGING_HALFLIFE_DAYS=180
DEFAULT_MIN_DECAY_WEIGHT=0.1
DEFAULT_MIN_ACCURACY_THRESHOLD=0.5
DEFAULT_KMEANS_MIN_ARTICLES=20
DEFAULT_KMEANS_K=5
HARVESTER_CRON=0 7 * * 2,5
INTELLIGENCE_CRON=0 6 * * 1

# ── Rate Limiting ─────────────────────────────────────────────────────────────
SA_CALLS_PER_MINUTE=10
FMP_CALLS_PER_MINUTE=30
ANTHROPIC_CALLS_PER_MINUTE=50
OPENAI_CALLS_PER_MINUTE=60
